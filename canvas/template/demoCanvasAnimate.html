<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Canvas Animate</title>
<meta name="description" content="">
<meta name="keywords" content="">
<style>
	#canvas{
		width: 400px;
		height: 400px;
		border: 1px solid #aaa;
		display: block;
		margin: 0 auto;
	}
</style>
</head>
<body>
    <canvas id="canvas"></canvas>
	<button id="startAnimation">Start</button>
	<button id="stopAnimation">Stop</button>


	<script src="http://cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script>
    <script>
    	var canvas = $('#canvas');
    	var context = canvas.get(0).getContext('2d');

    	var canvasHeight = canvas.height();
    	var canvasWidth = canvas.width();

    	var playAnimation = true;

    	var startButton = $("#startAnimation");
    	var stopButton = $("#stopAnimation");

    	startButton.hide();
    	startButton.click(function() {
    		$(this).hide();
    		stopButton.show();

    		playAnimation = true;
    		animate();
    	});

    	stopButton.click(function() {
    		$(this).hide();
    		startButton.show();

    		playAnimation = false;
    	});

    	var x = 0;
    	var n = 0
    	var m = 40;

    	function animate() {
    		if(playAnimation){
    			if(x > 295){
    				x = 0;
    			}else{
    				x++;
    			}
    			
    			if(n < 100 && m == 40){
    				n++;
    			}

    			if(n == 100 && m < 90){
    				m++;
    			}

    			if(m == 90 && n > 0){
    				n--;
    			}

    			if(n == 0 && m > 40){
    				m--;
    			}



    			context.clearRect(0, 0, canvasWidth, canvasHeight);
    			context.fillRect(x, 10, 10, 10);

    			context.fillRect(n, m, 10, 5);

	    		setTimeout(animate, 33);
	    	}
    	}

    	animate();
    </script>
</body>
</html>